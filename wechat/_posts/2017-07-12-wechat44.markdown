---                                                         
layout:     post                            
title:      "20170712-支付宝、微信退费等"                                                           
date:       2017-07-12 19:00:00                                                           
author:     "PaymentGroup"                      
tag:		[publish]                
header-img: "img/post-bg-wechat.jpg"                     
---         
  
## 主题一： 卡bin  
  
[银联2017最新卡bin表](http://static.cocolian.cn/attach/BIN20170512.xls)  
  
## 主题二： 爬虫  
Q1：请问下群里的各位技术大牛，是否有用爬虫爬取过最高法提供的全国失信被执行人的名单？  
A1：爬过深圳的在售二手房记录  
A2：我以前也爬过房价数据 还爬过拉勾网的招聘数据 就是不知道失信人名单怎么爬  
A3：爬过，之前使用开源的验证码识别tesseract，今年初网站验证码升级了，需要自己训练下样本库了  
A4：最高法失信等名单是批量上线的，有一定滞后性，还需要爬各地高法网站进行补充  
Q2：动态数据吗？  
A1：是  
  
## 主题三： 支付宝、微信退费  
Q1：请问下，支付宝和微信退费时 ，原路返还是如何返还的？ 比如：给支付宝的余额充值，招商卡充值100元，工行卡充值100元， 发生退费时，是退200元给招行还是给工行？  
A1：分开原路退，按照充值流水退  
A2：余额充值是提现，提现可以提到别的银行卡里，不属于退款吧  
A3：按充值订单流水退，两次充值就是两笔了  
A4：如果用户通过两个渠道各充值100元，然后消费了100元，最后需要退100元。这100元退哪个渠道是比较随意的。但是需要根据业务规则和场景进行产品设计。  
A5：余额充值不能退吧，可以提现应该  
A6：描述的是原卡提现。但是有的公司做不了原路验证，或者在意手续费，就会选择退款接口  
  
Q2：那要是我消费了50元后，如何退？比如现在的ofo，我微信充值100，支付宝充值100，我余额有150 退费该如何退？  
A1：ofo不允许退款。从合规来说，充值是不能退款的  
A2：支付公司的利润不就是这里蹭一点，那里蹭一点么。把提现包装成退款，又省了卡片验证的费用，又省了代付的费用。  
A3：解决方案有很多，看你的产品需要什么样的特点。举个例子，如果追求退款成功率，那要从先充值的那一笔开始退款，因为退款发起是有窗口的，过了就不能退了。  
A4：目前支付宝进行多卡充值以后，取现都没有各自走原卡进出的要求. 但是不知道背后是不是网商银行有做处理.  
A5：微信和支付宝通道不是可以部分退款么？各退75  
A6: 理论上多卡充值，同时多卡取现，这不就已经是转账业务了么......  
补充：其实是分笔支付+部分退款的需求，包括解决单笔支付限额做的订单分拆  
A7：1、定金订单1000元，工行卡付款； 2、尾款订单9000元，招行卡付款； 3、用户申请退款，扣除手续费50元； 4、定金订单全额退款，原路退回工行卡； 5、尾款订单部分退款8500元，原路退回招行卡  
A8：我们有这样的场景，客户支付宝绑定信用卡，登录我们app后用支付宝充值，之后又退费了，我们没有使用原路退费规则，导致客户有套现的风险  
A9：这个是我原先做电商时候的退款逻辑，退款次序从最近的订单开始追溯。原因是财务处理比较方便。  
A10：比如账户余额有消费，有提现，等等，还有渠道退款的时限，需要把优先级列出来  
  
Q3：退押金是不是算提现会更好  
A1: 押金是一笔订单，走的是原路退回的吧？只是原卡失效的时候可以退到余额，让用户可以提现  
  
Q4：有些订单没发拆子订单，他本来就是一个业务订单，没法再细拆了,如何处理？  
A1：入到不可提现账户就可以了  
A2：你这种模式就是自己做了个余额，用户所说的退款对于你来说应该是一笔提现，对于提现收费的话，基本套现就不会存在了。而且还没损失信用卡那部分用户。  
  
## 主题四： 支付账户的演变  
  
[延伸阅读：美联支付体系架构演进（上）](http://mp.weixin.qq.com/s?__biz=MzIyMjg2NjIyOQ==&mid=2247483721&idx=1&sn=52b5b2dbc4257bf2838cef217031c196&chksm=e827bf13df503605d7024ba4794df6ce326cc0fa3587f609265bd51aaa429981acacc38aae4b&mpshare=1&scene=1&srcid=0712HbP68wARGnDjGl9eqFfW#rd)  
  
从支持单一支付，到多重组合支付，其实演变的是对于资金的处理能力，无论是账务系统或者是清算系统，都是围绕资金流做的演变  
