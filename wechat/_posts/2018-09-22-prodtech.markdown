---  
layout:     post   
title:      "20180922-差错处理"  
date:       2018-09-22 12:00:00  
author:     "支付产品开发群"  
tag:		[publish] 
---

## 一、定义

我们先了解一下什么是长短款。
支付长短款是在支付业务中发生的长款和短款。主要是由于系统或者其它原因的差错和某些人为因素造成的。长款与短款不得互相冲抵，应分别查明原因，明确责任。
长短款是在销售业务中发生的长款和短款。主要是由于工作上的差错和某些人为因素造成的。长款与短款不得互相冲抵，应分别查明原因，明确责任。

## 二、长款

我们先说长款，长款就是支付机构应收款款项大于实际银联、网联、银行结算的给支付机构备付金的款项

具体原因可能有如下几个：

**1. 上下游日切时间不一致**  

支付机构的日切时间与银联、网联、银行、支付宝等日切时间不一致，因此先要把日切时间按照渠道进行内部转换，然后进行对账，避免日切时间不一致的长短。
目前已知的银联的是23:00-次日23:00，网联是每小时日切，00:00-00:59，支付宝、微信日切时间均为00:00-23:59，
但是由于各渠道系统时钟不可能完全一致，有可能存在秒级误差，因此从技术上不可能完全规避这类长款。 

**2. 系统原因**  

由于系统原因导致的长款，具体原因有例如：  
1. 缓存记录订单异常  
2. 渠道返回成功，系统内部处理超时返回商户为失败  
3. 系统内部单位精度不准，导致计算渠道侧手续费存在误差  

系统原因导致的长款对于很多支付机构场景是忽略，或者是因为几毛、几分钱就直接无视了，但是从严谨性而言必须要重视，千里之提溃于蚁穴，而且本身通过对于问题深入研究可以提高自己的专业化水平

**3. 退款失败**  

由于退款失败导致内部已经轧差的应收款项未能正确处理，导致应退款项未能实际退款，这类原因一般可以通过设立专用退款账户很容易发现，而不是混在一起，退款和正常清算款混在一起不能定位原因

**4. 汇兑损益**  

涉及外卡收单的情况下，存在汇兑损益，这种情况下可能存在长款也可能存在短款

**5. 银行内部入账失败**  

商户发起代付交易系统银行返回代付已经受理，但是实际银行内部代付入账失败，具体原因可能有如下：
1. 入账账户触发反洗钱冻结机制  
2. 用户账户为长期不动户被冻结  
3. 用户账户已经处于销户中  
4. 银行风控原因冻结账户  

长款可能发生的原因大致如此，当然不排除可能存在其他异常情况，例如XXXX机构发生重复结算，XXXX机构清算资金计算错误，这里不做枚举了

## 三、短款  

接下去我们说一下具体短款的原因：

1. 由于系统原因导致的短款，具体原因有例如：  
	a. 缓存记录订单异常    
	b. 渠道返回失败，系统内部处理超时返回商户为成功   
	c. 系统内部单位精度不准，导致计算渠道侧手续费存在误差  
2. 支付机构垫资为商户进行退款，商户未能将垫资款项进行补齐，导致支付机构内部短款  
2. 支付机构由于代付交易系统控制异常，存在部分交易超时重复代付，导致资金短款  
4. 由于内部系统手续费配置错误，存在手续费配置为0，导致渠道侧来款的资金少于实际应收款项  
5. 由于结算周期和结算方式的异常，导致的系统短款，例如和商户约定按照月结方式收取，但是商户破产倒闭了，无法按期结算  

综合以上情况，常见的长短款的大致有以上情况。 

对于长短款的处理，一定要明确调查清楚原因，会计记录上记入“待处理收益”或“待处理损失”帐户，经批准后再转入”财产溢余”或“财产损失”等有关帐户。
如果查明原因是可以进行修正的长款，一般采取退款方式处理，而对于短款则尽可能通过法律或者其他方式进行追偿，如确实无法挽回的，那经过财务负责人批准后纳入损失。
所以长短款是每家支付机构非常重要的日常运营工作，一般为双人双岗负责，一人经办，调查问题原因，一人复核确认问题已经查明，并确认最终财务记账。

---

## Q&A
Q1：龚老师，长款的定义跟我之前理解的不太一样，我之前理解的支付公司应收大于实收，支付公司少收到钱了，应该是支付公司短款  
BZ：嗯，长款和短款是对于支付机构而言的。说明你们公司支付体系不是专业会计出身的。长短款不是因为支付业务才有的，比如银行盘点现金也有长短款啊。一个银行网点，收进现金100.01，但是实际银行会计记账存款进账有101.01。这个时候银行就短款了，要查账了。反过来，一个银行网点，收进现金101.02，但是实际银行会计记账存款进账有101.01，这是时候就是银行长款了，也要查账，但是相对没有那么紧张了。   
A1：不是，我表达错了，支付公司角度，支付公司多钱了就是长款，支付公司少钱了就是短款。所以，支付公司的应收＜实收是长款，应收＞实收是短款。   
BZ：核心了解吗？核对往来款，其实对应会计上的应收账款核销。其实很好理解的，自己去运营岗位呆一天就知道了

Q2：“接下去我们说一下具体短款的原因：  
1、由于系统原因导致的长款，具体原因有例如：
- 缓存记录订单异常
- 渠道返回失败，系统内部处理超时返回商户为成功
- 系统内部单位精度不准，导致计算渠道侧手续费存在误差”这段话怎么理解短款了？  

BZ：银行返回你失败，你返回商户成功。应收肯定少于实收吧。  
A1：哦，明白了。这种是在收款中会出现  

Q3：系统内部单位精度不准，导致计算渠道侧手续费存在误差。这个应该是支付公司手续费设置6位，通道只有4位，所以四舍五入导致：支付公司计算的应收手续费收益（扣除通道成本）>通道实际打款金额？  
BZ：支付机构应收的=订单金额-渠道手续费。渠道手续费两边精度不一样，那么得到的应收和实收也就不一样了。  
A1：这种精度不一样的一般怎么处理啊，补账吗？  
BZ：调账，会专门做一个交易出来。  
A2：目前大多数机构是不是基本都是保留四位小数？  
BZ：常见是4位，内部计算是4位  
A3：系统里面应该是按四位，单笔计算的，提供给商户的手续费账单理论上也应该按四位。不过我之前公司也是按两位返的。  
A4：这样提供给商户的能让商户对平了？  
BZ：应该可以的  
A5：微信支付宝给商户都是两位   





