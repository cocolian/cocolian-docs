---                                                                         
layout:     post                                            
title:      "20180520-银行信用卡前置系统"                                                                           
date:       2018-05-20 19:00:00                                                                           
author:     "支付产品架构群"                                      
tag:		[hidden]                             
--- 

大家好，分享的内容是信用卡前置，前置的内容往期老师已经讲的很多了，也很精彩。  
   
   
前置工作的技术性不强，主要和业务有关。这个信用卡前置和其他的综合前置基本上都是一样的  
   
## 一、 信用卡前置系统
   
![2018-06-05 14:18:44](http://static.cocolian.cn/img/201806/20180605_141844.png) 
   

   
![2018-06-05 14:19:19](http://static.cocolian.cn/img/201806/20180605_141919.png) 
   

   
下图是目前应用的架构  
   
 
   
![2018-06-05 14:20:57](http://static.cocolian.cn/img/201806/20180605_142057.png) 
   
  
   
![2018-06-05 14:22:03](http://static.cocolian.cn/img/201806/20180605_142203.png) 
   
  
   
![2018-06-05 14:23:26](http://static.cocolian.cn/img/201806/20180605_142326.png) 
   

   
![2018-06-05 14:24:17](http://static.cocolian.cn/img/201806/20180605_142417.png) 
   
 
   
![2018-06-05 14:24:44](http://static.cocolian.cn/img/201806/20180605_142444.png) 
   

   
![2018-06-05 14:25:24](http://static.cocolian.cn/img/201806/20180605_142524.png) 
   
  
   
![2018-06-05 14:25:53](http://static.cocolian.cn/img/201806/20180605_142553.png) 
   
 
   
信用卡前置系统介绍就到这里。  
   
## 二、 双主机记账案例
   
下面我介绍一下一个简单的双主机记账案例，本行借记卡还本行贷记卡  
   

   
一个银行通常都会有2个核心，一个是借记卡核心，一个是贷记卡核心。通常借记卡核心都是自建系统，贷记卡核心一般都选择托管在银联数据。  
   
 
   
下面介绍一下场景：客户通过本行的信用卡手机app，在界面上先绑定本行借记卡，然后选择本行还款功能，选择需要还的贷记卡，输入借记卡密码，完成本行还款的操作。  
   
 
   
双主机记账大概会有5种场景，目前客户这边采用已借记卡核心为主，记账超时不冲正，采用日终调银联账方式  
   

   
1：核心成功，银联成功  
   
   
![2018-06-05 14:37:54](http://static.cocolian.cn/img/201806/20180605_143754.png) 
   
   
整个还款交易原子是成功的，前置明确给手机app返回交易成功  
   
   
2：核心记账失败，明确返回手机app交易失败  
   
   
![2018-06-05 14:39:44](http://static.cocolian.cn/img/201806/20180605_143944.png) 
   
   
3：核心记账超时，核心交易状态不明确，给手机app返回&amp;quot;还款已受理，请于48小时内查看是否入账！&amp;quot;，日终对核心账  
   
   
![2018-06-05 14:42:04](http://static.cocolian.cn/img/201806/20180605_144204.png) 
   
   
4：核心记账成功，银联记账失败，给手机app返回&amp;quot;还款已受理，请于48小时内查看是否入账！&amp;quot;，日终对银联账  
     
   
![2018-06-05 14:43:00](http://static.cocolian.cn/img/201806/20180605_144300.png) 
   
   
5：核心记账成功，银联记账超时，给手机app返回&amp;quot;还款已受理，请于48小时内查看是否入账！&amp;quot;，日终对银联账  
   
   
![2018-06-05 14:43:50](http://static.cocolian.cn/img/201806/20180605_144350.png) 
   
   
日终对账只调整银联，只出银联差错，防止核心系统短款。  
   
   
以上是我分享的信用卡前置和本行还款的一个功能介绍，内容过于简单，有问题可以下面交流  
   
---  
   
## 三、Q&A      

   
Q： 支持他行借记卡还本行贷记卡么  
A: 本来支持的，后来银联数据叫停了，政策问题  
     
![2018-06-05 15:01:52](http://static.cocolian.cn/img/201806/20180605_150152.png) 
   
Q： 为什么银联数据叫停，有什么问题么  
A:  只知道不合规，不知道和网联有没有关  
   

Q: 感谢分享!我想问一下,前置系统架构中有一个交易管理模块,里面有交易动态加载,交易注册,交易卸载等,能不能介绍一下大概用了什么技术?
A：可以用微服务加注册中心。目前这个前置技术比较老了，后面的前置都是去中心化的，都是微服务的  
   

Q: 信用卡前置，主要功能涉及哪些？  
A: 应该和中间业务前置差不多，和esb也差不多。 主要是对银联接口的封装。 比如介绍的本行还款接口，是一个组合接口，8个接口组成的  卡核心是银联数据，数据全都是托管的。
  
![2018-06-05 15:53:00](http://static.cocolian.cn/img/201806/20180605_155300.png) 
   
目前公司系统都是微服务的。 国内形势，只有大厂能自建卡中心，剩下的都是使用银联数据的  。
   
有些行要准入标准，前置tps要过1万。 


Q： 把贷记卡系统托管到银数，出于哪些原因啊，技术实力吗？     
A： 技术是主要一方面吧，贷记卡核心被国外厂家垄断了。  
   
![2018-06-05 16:03:57](http://static.cocolian.cn/img/201806/20180605_160357.png) 
![2018-06-05 16:15:16](http://static.cocolian.cn/img/201806/20180605_161516.png) 
![2018-06-05 16:17:43](http://static.cocolian.cn/img/201806/20180605_161743.png) 
   
   
头寸对应的英文是position，就是指仓位，也可以说是资产存量。人行是给商业银行记账的，一家银行在央行那里的资金就叫头寸，银行司库对头寸进行管理就是管理资金的流动性，避免资金闲置。  
   
