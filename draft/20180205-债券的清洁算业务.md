# 一、主题分享：债券的清洁算业务
债券是标准化的金融资产，我们公司作为全国地方政府债，国债等一系列债券的总托管人；我们的债券清结算系统是我们债券的核心后台系统，贯穿了整个债券的生命周期；
目前跟债券相关的发行、债券交易、公开市场操作、银行间市场短期流动性调节等都需要涉及到我们的清结算系统</br>

清算系统主要是接收各前台交易系统的业务操作请求</br>
不同外围业务系统发送业务指令的组件，是所有指令的统一入口。负责对交易完成后到结算前交易数据或结算指令的接收、规则检查、指令匹配/确认、清分、合同生成、以及轧差、责任更替等处理并形成相应的结算合同发送结算组件</br>

结算是指托管结算机构根据已匹配/确认的交易双方的结算指令办理债券过户和资金收付的行为</br>

我们的清算系统主要包含6个子模块：</br>
1. **指令接收子模块**负责接收所有业务系统的操作指令；这里有一个业务和市场的概念，我们的接收组件原则上是24小时运行的；但是不同业务、不同市场（公开市场操作、柜台市场、担保品）具有不同的时间序列；不同的日终、日初时间，接收组件根据具体的业务，决定是否接收某一条业务指令。</br>
2. **指令确认**是指针对双方或者三方指令需要进行多方确认，指令匹配是指针对境外二级托管机构比如明讯等，直接发送过来的业务指令，需要业务实际参与方再次发送相关指令进行匹配（实际上就是真正买卖双方再次确认指令要素）的一个组件
3. **预处理组件**根据业务需要，以指令的来源或业务种类需要的特殊处理等为依据为指令的部分要素（如要素“市场/特定业务群”）、部分特定指令的特定要素（如发行缴款DVP标识等）、部分业务指令需要计算要素的计算和填充，以及债券代码、账号等要素进行赋值，便于后续的规则检查和结算组件的处理。</br>
预处理组件组要是根据业务特定，为债券代码、机构账号全称简称、以及某些债券价格收益率的计算并且赋值到指令相关要素中去</br>
4. **规则检查组件**可供清算组件或客户端、中心端调用，负责完成指令的规则检查。指令的规则检查分为录入时的交互式检查（嵌入客户端和中心端或供调用）、指令录入完成后进行检查的前置检查功能和指令进入系统且完成相关的复核/确认（单边指令为复核，双边指令未确认）后进行后台检查功能三个功能。</br>
5. **合同生成组件**从规则检查组件接收通过规则检查的指令并生成相应的合同。生成的合同发往清算组件。</br>
6. **清算组件**负责接收合同生成组件生成的合同，并将标记为全额的合同直接发给结算组件，标记为净额的合同完成净额处理（包括净额检查、净额轧差、责任更替）后发给结算组件。清算子组件包括净额检查功能、净额轧差功能、连续DVP轧差功能和责任更替功能。</br>

在我们的系统里，指令和合同是贯穿整个清结算系统的</br>
如果一个交易、发行、质押操作如果各方面要素都对的话，就会根据指令录入的要素生成相应的结算合同</br>

清算系统负责处理指令、结算系统负责处理合同</br>
在我们国家债券业务很多很复杂，但是最后后台的指令合同类型大概也就是80多种</br>
> 卖方A用户输入了指令，之后指令状态变为待复核，卖方用户B复核之后，变为待确认，买方确认后，变成已确认，已确认的指令如果不违背债券一些基本的约束，比如说买方或者卖方不具备相应业务资格，则成为合法。最终生成相应的业务合同</br>

业务合同的生成仅仅代表成交意向的达成，并不代表最终交易的达成</br>
> 举个例子，合同生成代表双方同意十天后以100W的价格交易1W手某债券</br>
生成的结算合同最终是发给结算系统的</br>

结算系统负责处理最后的资金、资产之间的交割</br>

**一个典型的债券合同的状态变化**：</br>
- 清算组件发送给结算组件后，合同是待履行状态的，10天后在日初时刻，合同会变成应履行的状态</br>
- 不停的检查卖方的债券余额和买方的资金余额的情况:</br>
  i.如果卖方债券足，则进入等款状态；</br>
  ii.如果同时买方资金足则进行相应的债券和资金的交割；</br>
  iii.如果交割完成则合同成功，否则失败</br>

因为清、结算系统是后台系统，而且本人水平有限，所以有可能讲得有些枯燥；但对于如何实现一些金融资产后台交易系统应该有一些借鉴意义</br>

-----
# 二、Q&A
Q1:我看到了有不同时间序列，请问清算也是按照不同时间序列处理的吗？</br>
A1:不同的时间序列主要是不同业务有可能有不同的开市闭市的要求</br>
A2:哦哦，我明白了~~谢谢~这种还挺复杂</br>
A1:如果某业务是日间状态，清算系统会接收该业务的一切指令</br>
A2:嗯，按照时间序列和业务状态</br>
A1:如果非日间状态会拒接接收，且把还没有处理完的指令直接做失败处理。</br>
A2:这样啊，为何不做延迟处理吗？而是直接变成失败呢？</br>
A1:我们的业务指令如果接收了没处理完基本上都是对手方还没有确认或者复核</br>
A2:明白了，也可以看做是闭市了</br>
A1:因为该业务已经不是日间状态的话，清算系统是不会接受他们过来的任何响应的，所以一旦业务截止了，就把剩余该业务的指令做失败处理</br>
A2:嗯嗯，明白，是多重依赖的控制，也只能变成失败了</br>
A1:债券业务因为是机构业务，所以很多都是双人复核，双方或者三方确认</br>
A2:卖方和买方可以看做是银行A和银行B</br>
A3:所以刚说的机构业务是指这个啊</br>
A2:嗯，我们也叫一级交易市场</br>
A3:不太熟悉这块 还以为面向用户的</br>
A2:到我们下面的个人和其他金融机构，叫做二级交易市场</br>
A1:恩恩，债券里头没有直接面向用户的</br>
A2:一般交易单位是手</br>
A4:一级，二级</br>
A1:大爷大妈们买的国债是银行先从我们这买卖了之后，再作为托管人卖给个人但是大概99%的债券都是银行和券商自持；卖给大爷大妈的都是极少数</br>
A2:99.3%，一般银行打包组合一下，变成理财产品卖给用户</br>
A1:具体数据不知道。我们的清算系统有笔数少，金额特别大的特点</br>

Q2:不过债券最近一直在涨，应该你们前几年分红还是不错的？</br>
A1:我们只收交易中介费，债券涨跌跟我们倒没太大关系</br>
A2:债券又细分还有很多种，有国家发行的债券、金融机构发行、和企业发行的</br>
A3:量大之后，支付还是厉害</br>
A2:支付算是很简单的了；债券里面又分可转股债券和不可转股债券；按照付息方式有零息债券，定息债券，浮息债券</br>
A1:对，还有些债券有选择权，债券的登记也是一个比较复杂的体系</br>
A2:嗯，是的~~这里面就涉及到登记的时候很多信息；债券的票面价值，名义利率，债券成交价格等等；</br>
>还有一些特殊的私募债券(Private Placement Bond)是指向与发行者有特定关系的少数投资者募集的债券，其发行和转让均有一定的局限性。私募债券的发行手续简单，一般不能在证券市场上交易。公募债券与私募债券在欧洲市场上区分并不明显，可是在美国与日本的债券市场上，这种区分是很严格的，并且也是非常重要的。中摘登的债券都是公募债券</br>

A1:债券的登记、托管、清结算、资金、客户账户管理是我们最核心的系统</br>
A1:嗯，是的~~也是金融的核心</br>

Q3:是做资金中介吗？我记得前段时间债券配资也很多</br>
> 随着新发行债券的利率不断下行，加上债券质押融资便利，为了维持持券的收益，很多金融机构开始大量使用杠杆来提高整体收益水平；在股票场外配资业务被证监会清理后，部分银行开始转向债市，大量开展债券投资结构化配资业务。目前来看，资产荒仍旧会持续一段时间，作为标准化的金融产品，在股市后市不明朗、场外配资被打压的背景下，大量资金开始选择配置债券，目前银行开展债券配资的杠杆率可以达到1:9甚至1:10，主要是将资金交给债券投资顾问，由投顾进行操作。

A1:我们要为银行间市场的金融机构，提供信贷类资产的DVP交易结算机制，类似与早期支付宝，银行通过大额支付，打到我们的资金系统，我们做信贷资产和资金交割;就是一手交资产，一手交钱。</br>
A2:嗯，那就是资金中介，在交易结算上作为中介机构，实现信用转移</br>
A1:嗯，配资不敢做，会被监管机构弄死；但是第三方做，我们确实不管，目前</br>
A2:嗯，是的，我知道，第三方做的不少；资产新规出来后估计都不能做了，我觉得监管还是很厉害的，很多方向上把握越来越精准了</br>
>《关于规范金融机构资产管理业务的指导意见（征求意见稿）》这个建议仔细学习，一开始很多不理解，看多了，联想市场上乱象，很多都能想通了</br>

A1:是得多学习哈</br>
A2:嗯，是的，不过监管决心很大;未来各家银行成立资管子公司可能性比较大</br>
