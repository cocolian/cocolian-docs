今天有幸和大家一起交流第三方支付算费的那点事，主要抛砖引玉，互相学习。下面就开始正式的分享。  
## 一、背景介绍
在支付业务中，经常会碰到两件事情，一个是问商户的收费，一个是给渠道的成本。   这两个账算清楚了，那就可以对公司的运行情况有比较好的了解。今天就先来说说算费，有时间再讲讲成本。 
## 二、算费
### 2.1 收费场景
支付公司典型的收费场景有：
- 根据不同渠道收费，例如，快捷还是网银
- 根据结算周期，例如，T0还是T1
- 根据不同产品，例如，分账还是收单

### 2.2 算费系统的职责
总结为一句话就来决定交易的手续费“是否收，收多少，向谁收，收给谁，怎么收？”
1. 是否收（匹配条件），就是算费系统根据业务场景&#160;找到适合的价格策略；
2. 收多少（价格策略），就是根据找到的价格策略，来计算手续费；
3. 向谁收（付款账户），手续费算在谁头上，谁来出这笔钱，是前端收费还是后端收费；
4. 收给谁（收入账户），这笔钱收到哪个收入账户上，可能每个业务场景的收入账户是不一样的;
5. 怎么收（账单），月结还会实时，如果是月结，则需要生成账单到指定时间后向商户收取。

#### 2.2.1 是否收（匹配条件）
匹配条件：产品示例如下：
- 提现&充值：平台商户 
- 支付渠道：快捷、网银 
- 支付终端：手机、PC  
- 结算周期：T0，T1


#### 2.2.2收多少（价格策略）

![image](http://static.cocolian.cn/img/20180904_192818.png)

![image](http://static.cocolian.cn/img/20180904_192827.png)

#### 2.2.3 向谁收（付款账户）
向谁收：前端收费还是后端收费；
- **前端收费** ：例如在提现时，出款金额100，手续费2元，账户一共扣102，用户银行卡到账100 
- **后端收费**，还是提现，出款金额100，手续费2元，账户扣100，用户银行卡到账98。  

#### 2.2.4 收给谁（收入账户）
这个在算费的场景下一般是收到支付公司的收入账户。如果是分账系统则可以根据分账规则来指定特定的分账方。

#### 2.2.5 怎么收（账单）
账单方式模型用来描述费用产生账单的方式，分为实时和事后两种。 
- **预计费（实时账单）**，即收到计费请求后实时产生账单的模式，一般用在先付费后使用服务的场景。 
- **后计费（事后账单）**，即用户先使用产品事后在产生账单的方式，事后账单可以根据以下维度进行收费：
  - 时间，在一个时间周期内对用户的费用进行结算；
  - 笔数，当达到一定的交易笔数时，对这一批交易进行计费；
  - 金额，当达到一定的交易额是，对这一批交易进行计费。


**附：一个算费的过程**

![image](http://static.cocolian.cn/img/20180904_192905.png)

## 三、Q&A
**Q:** 不同的计费方式，是每个商户一种计费方式吗？还是说某一类或某一个代理商一种收费方式？  
**A:** 每个商户，不同产品不同渠道都可以有不同的计费方式；  
**Q1:** 如果每个商户的话，那分润计算的时候，怎么算啦？会不会更麻烦？  
**A1:** 分润指的是卖家和商户之间的分润规则吧，我这边说的是商户向第三方支付支付的手续费，分润可以有分润的价格策略和匹配规则。  
**Q2:** 像月结收费这种，最后月结时费用采取怎么样的方式？人工打款或者系统扣款；  
**A2:** 系统产生账单，商户来支付。  

**Q:** 算费和分润是一个系统吗？  
**A:** 其实是可以的，不过我们分开了。  
**Q1:** 算费是实时计算还是异步完成的？  
**A1:** 实时的，但不一定是在支付的时候立马计算，有可能是在结算的时候才计算，如果是月结，那就是实时算，按月结。  

**Q:** 请教个问题，使用前端收费还是后端收费考虑的业务场景是什么？  
**A:** 主要是用户体验，有些场景，用户希望固定到账金额，那就选择前端收费。  
**Q:** 后计费（事后账单）的方式，是统一月结的方式还是达到某个固定值的时候统一扣费的？  
**A:** 一般是固定时间；  
**Q:** 请问如果出具手续费报表的话是如何统计的，数据即时生成嘛？  
**A:** 明细的话，会在日常的对账单里，跟着交易一起展示的。手续费扣除明细同时会在账务明细里体现，月末的时候，也会生成一个汇总给到商户。
