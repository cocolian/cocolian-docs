# 一、主题分享
大家好，自从入群以后和大家学习了很多，今天我就分享下在小银行做支付的一些体会或说是经验教训，下面我就开始献丑了。  

主要从厂商、业务同事、银行资质、科技团队说一下：  
（一）银行做支付主要还是外包的方式，有成本的考虑也有甩锅的想法，厂商的选择问题很大，选了一家名气大但专业性不高的公司。  

**主要是两个方面：**  
1.合作模式问题；  
2.产品能力问题。   

**合作方面的问题：** 厂商采用大产品小实施（其实产品也没几个人）的开发模式合作起来很痛苦，响应业务需求很慢，科技夹在中间很被动。

**产品方面问题：**    
举几个例子：  
1.不同接口相同意思的错误码不统一；  
2.接口设计只考虑对私不考虑对公；  
3.分布式架构最坑，个人觉得特别不适合人员流动大，大产品小实施的厂商，现场人员完全hold不住；  
4.路由设计上多通道只能同一个优先级，无法根据商户配置优先级。  

（二）产品的同事多是电子银行出身，对支付产品不是很专业，很多功能前期没想好或者并不了解合作商户的使用场景，功能上线后变来变去。主要原因是负责商务的同事出去吹牛说功能牛叉，回来通知产品的同事抓紧做，科技说时间紧，产品同事说可以简单点先上线，上完线商户提问题说缺这少那，运营同事疲于应付，最后很多工作还是落到科技头上。  

（三）作为没有备付金资质的小行，比如代付交易，对外部有支付牌照的支付机构商户的先收后付的交易场景来说，商户的钱不能直接打款到银行的内部户，而是要打款到通道的账户才合规，这种遇到需要失败的交易特别难处理，需要记录每天失败的额度并累计。当与后端三方通道合作代付交易时，因为三方通道不能在行内开户，行内又舍不得垫资成本，所以只能先把钱打给通道才能发送代付指令，用户体验比较差。  

（四）小行的科技团队也不是很专业，招对口的人不容易，都是半路出家做支付的。对系统的关键点把握不足，很难做到掌握产品、主导设计、协助运营。比如对多通道的重要性认识不足，对路由的设计缺少经验、对运营和报表的功能关注不够，对技术接口（不变）和业务接口（多变）分层缺乏设计。  

**另外银行和支付公司做支付的有些区别：**  
1.银行更看中资金沉淀而不是中间手续费收入。  
2.银行可以对接超网、银联、二代这些通道，但其实小行在银联面前也没啥地位，也是各种协调。  
3.银行自身有一些需要支付功能的场景，比如p2p存管、聚合支付、直销银行（二类户）等。  
4.银行互联网金融部要快速发展业务，零售金融部要线上化，中间谈需求也是各种扯皮。

# 二、Q&A
**Q:说分布式架构很坑，能不能详细说说体会？**  
A:不是说分布式坑，主要是我觉得系统架构是演化来的，一定是随着业务的发展才逐渐变得复杂的，直接上一个分布式的系统，在科技人员配备不齐的情况下会很痛苦，包括搭建测试环境，修复问题、支撑商户都很费劲。我的观点是刚开始不要搞的太复杂。  
S:无法做到量身定制，不做复杂方案，报价上不去  

**Q:小行没有备付金资质，只能打给通道：这个能具体点吗？渠道指什么？**  
A:渠道就是指的后台的通道，比如银联，如果前端商户是支付机构的话，监管好像不允许支付机构直接打钱到银行内部户，可以直接打给银联。银联的可以在小行开户，类似备付金账户，商户直接打款进来就行，但银联账户不允许冲正，如果有失败的交易就会留存一部分钱，银联的大爷态度退款也很费劲，只能抵消下一次的代付交易，这块处理起来就很麻烦。每个商户都要维护个余额。  
A1:我理解是代付交易，必须是银行先将资金汇款给代付通道后，再给通道发代付通知  
A2:看代付通道了，有的是银行先发给代付通道，然后再给代付通道汇款  
A1:很少有通道同意垫款，一般都是要求先汇款再代付  
A2:深有经验啊，确实是这个情况  
S:我觉得小行要做得聚焦，精和美，面撒太广的话对IT压力山大，难以承接。  

**Q:支付路由无法根据商户配置，可以说详细点么？**  
A:我们现在这个系统，通道的优先级是统一配置好的，所有商户只能用这个统一的优先级或选择关闭某个通道，而并不能实现不同的商户配置不同的通道优先级，有点low。

**Q:如果银行代收走的一家三方支付，支付公司不能转账到行里的内部户？**  
A:如果是支付公司的备付金账户出钱是不允许到银行内部户的。

**Q:你们遇到的这种情况是怎么处理的，搞的虚拟账户的子系统吗？**  
A:我们不是这样处理的

**Q:请问这种跨行代付的场景，能不能用商户汇款替代**  
A:没太理解你的意思

**Q:商户对外做跨行代付，能不能让商户通过跨行汇款实现？**  
A:可以的，前提是商户要在我行开户，小行做互联网业务比较难。开户面签是银行拓展业务的一个很大困难，而且企业开户更麻烦，如果注册地不是小行本地的企业，开户当天都不允许开企业网银的  
A1:好多场景用跨行汇款是实现不了的，而且效率也太低

**Q:有具体的法规吗？三方支付备付金账户不能转账到银行内部户。目前银行和支付宝，微信都是这种吧，微信，支付宝T+1把商户钱结算给银行的内部户，银行再结算给商户**  
A:你说的这种是条码支付的银行服务商模式，这种模式已经不让发展增量业务了，监管明确说了4月1号前不让做新业务了  
A1:不是啊，类似第三方和银行合作，第三方用你们第三方收付备福金，然后你们和第三方对接，让他清算给你，你在清算给商户。不一样。哪个是银行在第三方帮了账户，里面可能转过一次。  
A:你说的有道理，银行会在微信支付宝开虚拟户的。  
A2:微信支付宝清算两种模式：1、微信支付宝在行内无账户则T+1，或清算资金小于50wD+1清算。2、微信支付宝在行内有账户，资金可做到D+1清算。对于微信支付宝现在银行还是允许持牌三方接入的（对于商户资质比较严格），1是正常清算，2内部划转。一般现在城商银行自己做业务比较少，三方接入模式情况下，资金流从银行端直接划转三方备付金账户。

**Q:资金流是怎么样的**  
A:之前遇到过行内支付系统和扫码收单平台未对接完成的情况下都是银行柜面手工划转备付金账户，不知道有没有不合规

**Q:你说的直接结算给第三方支付的还有银行干吗，这种监管也不让新增业务了现在。有可能我们这边反应过度了，业务已经停了。**  
A:有呀。合规是没有问题的，一户一码真实商户交易是可以的。  
A1:这样银行只能赚手续费了，没有资金沉淀了