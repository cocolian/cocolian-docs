# 一、主题分享—P2P互联网创业企业架构选型

# 分享内容

大家好，我是钟巍，今天分享的主题是“ P2P互联网创业公司业务模式及架构选型“，上一家公司是一家互联网创业公司，负责研发工作，今天分享的内容都是基于当时获得信息，限于知识有限，如果有错误，欢迎指正，主要内容如下：

## 1 行业概述

信息中介是网贷平台的定位，P2P机构不是信用中介，也不是交易平台。现阶段网贷平台需要到金融办备案，完成备案是银行资金存管的前提。按要求P2P平台8月份要完成银行存管，现实情况大部分平台都未能完成。

资产荒。当前经济下行，优质资产稀缺，资产端竞争激烈。坏账风险增加，资产获取的竞争十分激烈

市场巨大。 2016年，全年累计平台达4000+，数量增加了约20%，累计成交额2万亿。投资人数2014年为118w，2015年为1350w,2016，2000w+。

整体利率下降，综合年化利率：2013年23%，2014年17.50%低于2013年，2015年跌破15%降至11.5%。 2016年已经跌破10%，部分资产标的已低于9%。

*问题平台淘汰加速。 2015年新增平台1990家，问题平台达950
家。 2016年新增平台780家，问题平台有1297家。*  PS：数据来自互联网， 网贷之家、网贷天眼等网站

## 2 业务模式
![image]20170630业务模式
### 2.1 主要参与者

投资人、借款人、第三方机构，平台

投资人、借款人既可以是自然人也可以是企业法人。

第三方机构包含第三方支付、银行、保险、征信等。

### 2.2   第三方机构之保险

P2P与保险公司“合作”的三种产品

一是借款方以房子、车子抵押借贷时，需购买财产险，这只是保障借款方的财产安全或赔付，与P2P偿还投资方的本息无关；

二是“账户资金安全险”，有数十家平台办理了此保险业务，仅是对账户交易过程中出现了资金被盗、黑客攻击等意外进行保险，同样无关平台本息偿还；

三是履约保证保险，目前已跳出多家平台宣称此模式。

P2P公司都可以宣称与保险公司合作，投资者对具体的保险业务并不了解，还误以为有了保险就可以保障还款的安全，但是这里面仅有一种保险——履约保证保险是对项目保本保息，保证投资者的收益和本金按时偿还。

即使是P2P平台涉及履约保证保险，如今市场上也是玩得花样百出，有的平台只有个别项目是投保了履约保证保险，但却作为噱头高调地宣传平台。

一般把借款人的借款项目叫做资产，资产有很多来源，房贷、车贷、消费信贷、应收账款等等。现阶段优质资产的获取竞争异常激烈。很多平台都愁资金到不到资产。

投资的方式有很多种玩法：自动标、手动标，散标，活期、定期，或者经过资产包装的固定或者浮动收益的XX宝，XX团等等。

这里提一下点融网的模式，他跟其他平台玩法不太一样。它把资产做成资产包，
包装成不同期限的XX团产品，每个产品下可能包含几千给标的，按他自己的宣
传，你的投资会被分散到这几千个标的中，通过这种方式来分散风险，这种模式
来自LendingClub。

## 3 技术选型

![image]20170630架构选型

这里的技术选型，有一个前提，是创业公司的技术选型。为了能尽快推进业务上线，选择使用云计算是比较好的方案。目前各类云计算服务很多，aws，阿里云、腾讯云等等。大家可以自己比较选择，各有优缺点。

上家公司基于自身的特性使用的是aws，使用
大约10个人的团队，经过三个月的时间，完成第一版系统的搭建上线，完成资金闭环流程。

架构基于开源系统和云计算服务搭建的一套分布式系统，支持透明发布，动态扩容与缩容。最上层是网络接入，包括cdn，ELB和Nginx做负载均衡。接着是应用接入，基于ROP开源系统框架开发的，主要的功能是鉴权、会话管理、加解密等。服务层使用使用Dubbo作为RPC框架，底层数据库使用mysql，批量定时任务使用Eclectic	job,	配置系统是diamond ，业务监控使用cat，应用及系统监控使用aws提供cloudwatch。同时自己基于aws的接口开发了一个devops工具。

## 4 写在最后
![image]20170630写在最后

这里主要分享一下系统中的一下实践

### 4.1 UIID

数据库表的id，使用UUID，为将来的分表分库做准备。

### 4.2 分布式事务
系统需要与外部系统进行交互完成一个业务场景，比如：还款。借款人还款后，需要首先变更还款信息，然后调用第三方支付的接口将本金利息支付到投资人在托管账户中，最后更新投资人账户余额和投资信息，在没有分布式事务框架支持的情况下，通过将业务场景的多个环节拆分成多个幂等的步骤，并通过状态递进校验来控制推进步骤，实现最终一致。

### 4.3 安全与风控
**安全**是一个系统工程，包括操作系统、中间件、框架等的系统漏洞，使用https，密码加盐处理，敏感数据加密，上传文件安全、crsf、xss，sql注入防范，

**风控**主要是不是业务层面的资产风控，主要防范羊毛党，主要的方式是检查异常账户、异常ip，接入各类风控平台，比如前海征信、同盾等。

### 4.4 并发更新
采用 一锁，二判、三更新的方式避免并发更新

### 4.5 数据异常

多个维度的业务对账，包括 进 与出，汇总与明细 ，资金与信息等方式的对账，发现数据的异常，及时
告警纠正。


# Q&A

补充说明

1、本来今年8月份就要到期的p2p监管办法缓冲期，延期一年，这个个人感觉是现实确实是难落地，现在大部分p2p企业都没有能完成银行存管。
2. 关于监管办法要求的个人20w企业100w的限制，很多p2p企业也都不符合，据说一些地方要出台地方条例 突破这个限制。

Q：P2真的是银行存管？

Q：保险保障 只是说账户被盗可以赔付吧

# 二、自由讨论

## 2.1 银行客户信息管理

Q：对银行而言，无论同业机构，企业，个人信息相对个产品线应该是集中管理的，一般是什么系统承担？为各产品线提供信息服务

A1：客户信息都是在ECIF，基本都是各家咨询公司卖了这家行卖那家行，都差不多

A2：各分行还有一大堆分行特色业务，比如为分行大客户建立的某些特殊的系统，缴费 资金存管 银企直连 现在很多重要系统的开发都被收归总行 不然杂七杂八安的系统多了去了。

Q：核心系统包括 账户和 交易吗？

A1：嗯 包括 但是细节 各家情况不一样 
核心和会计系统有的是分开 有的是合在一起，信用卡一般是分开的 也有对公系统和个人业务剥离的，核心其实是个笼统的概念，没有实现全国集中的时候 系统更是千奇百怪

A2：这个不同行就不一样了

## 2.2 美的10亿理财骗局
[新闻链接][link](http://mp.weixin.qq.com/s/nWM9GtHS0yjaFaq8u1Wx1w)


讨论：
- 美国大戏的感觉
- 都是演员级别的
- 银行内外勾结，很难识别。。这要是国外。。民生得破产。。
- 真行长办公室做着假行长，真是什么体验啊
- 这风控咋做的？
- 估计行长也收钱了，装不知道，不背锅还有油水
- 
### 2.2.1 金融行业电子印章
Q：脑洞开一下：金融行业的所有传统印章应该考虑全面升级下，加入科技元素，通过技术手段加上一些特殊的标识，保证无法复制。盖了章后，可以线上扫描验证章的真伪就好了。

A：一两年前就在做电子印章了，然后印章的编码可以在银行提供的渠道查询验伪

Q：结合区块链吗？

A1：就是变个流水，加个校验位，不过这种没法普及到全部业务。有些场景，有些机构还是只认红章，像个人业务流水这种，大部分行都已经是电子章了吧

A2：优化红章模板， 红章除了公司主体信息+ID，再加个二维码

A3：电子印象好几年前就有了

A4：关键验证主体要权威，像公证处一样

A5：数字证书、电子签名、电子签章、时间戳，CFCA、天威诚信一直在提供服务，出现法律纠纷，是能够提供举证的

A6：是的，目前有电子签名法

A7：电子签名可以解决放篡改。但要证明『他是他』，还需要配合认证服务来做。比如说人脸，指纹，个人的好做。企业的『他是他』很难做。

A8：到时候人人手里面都有一个识别软件   证明这个人是行长，其实zf有了一个更好挣钱的方式。

A9：证明是行长，可以利用关系链

A10：假的关系链就糟了，可能这个骗局铺了一年

## 2.3 支付行业发展探讨

Q：我觉得现在支付越来越难做了，盈利空间压缩的很厉害了

A1：本来就没搞头   巨头压得不做黑产没得搞

A2：现在搞支付的都是搞生态的，纯支付成本太高，所以，没有主产业的支付，没法玩阿，靠收单那点佣金，盖不住成本

A3：偷偷放T0

A4：同质化严重，客户集中在两个巨头

A5：生态不烧钱怎么玩

## 2.4 以苏宁任性付为例，探讨征信产品对用户办理贷款是否有影响

Q：苏宁任性付这类笔笔上征信的产品，对于用户办理房贷有影响么？

A1：看进入不进入人行征信

A2：苏宁任性付类似信用卡，给个人授予一个额度，在额度范围内使用，如果发生逾期或者争议，看苏宁的上报机制。

A3：网上查了下，有些人说结清状态就没事，有的说也会有问题，银行会认为你收入不稳定，太多商业贷款

*绝对有影响，不用质疑。
之前审贷款的时候，看到单身的尤其是未婚女性有信用卡逾期或者有金额不大的消费金融借款都会卡的特别严。这个可以说是行业惯例，没有歧视之类的，这个是实情，虽然我偶尔也用用蚂蚁借呗之类的，但绝对是很快就给还的，因为知道这个的影响。
消费类贷款太多，不管是有无逾期，在审批人眼中，这就是一种收入不稳定的体现。来源：知乎*

A4：进人行，笔笔进

Q：笔笔进，不是授信后循环使用？笔笔进如何理解？

A1：除了查询，每笔放款都会上

Q：有点拿不准，我们目前在做一款小额消费金融产品，资金方就是苏宁小贷，明确说了，每笔都会上

A1：有些公司会做转嫁的   借100块  里面有1块是套借的银行的，只要用户预期  银行就上报

A2：进人行征信后，再去银行贷款，银行会评估你资产负债情况和还款能力，有贷款进征信和征信贷款逾期是两个概念

A3：嗯，是的，银行主要是看你有无借新还旧的可能

A4：征信没逾期。收入证明和银行流水能提供。资产负债比不要太夸张。可以跟银行谈心的，实在不行，换家银行就是了。每个银行的标准也不是一致的，有的关注多一些，有的只关心有没有预期，还款能力如何而已。

A5：贷款是否发放依据的是还款能力和还款意愿，贷款太多，还款能力受质疑，逾期太多，还款意愿受质疑

A6：按我的理解，贷款类产品的核心其实就是风险定价（依据风险进行定价）。按我的经历，之前有房贷忘记还了，后面购房银行就质疑了，让我去当面说明情况。

A7：以前朋友线上测试。。第二天就把钱还了，然后当时他在工行申请房贷，没批下来，说他有笔贷款没结清。。最后还是让合作方找到银行开了结清证明

---
Q：人行的信用情况我记得好像5年后自动删除了

A1：征信更新的没那么快的。如果还款后立即去查征信，看到的还是有贷款的情况。已结清的。5年。如果逾期一直未还，一直在的。以前是5年，现在不清楚是多久了。

A2：一般报送有固定时间的

---
Q：不过现在一般个人不在乎，都是企业征信非常在乎  

A1：征信当然在乎，个人征信不好，你去哪里都借不到钱，只是各家的规则不一样。当然小额现金贷是不看征信的，他的逻辑不一样

A2：有些小贷公司也看。尤其是线下的。但是标准不一样。比如要求12个月内有8次逾期记录就可以这样。

A3：征信不好也可以借到钱的，只是利息高，额度低。上次在五道口金融学院，廖理院长说，有个银行专门做这种高坏账率的业务。配套的就是专门做这行的信贷员和催收，有专门的玩法

（PS：上面说的是另外的产品了，就像现金贷业务，只要利润可以抗住坏账，但是这个是另外的风控标准，他主要防范欺诈风险，而不是信用风险）

## 2.5 防欺诈

Q：话说欺诈你怎么防止？

A1：一般风控包含反欺诈和信用评级两部分，不管用什么手段去反欺诈，感觉都很虚，总会有盲点，
微信图片_20170702091720

A2：反欺诈一般做不到100%，所以本质上都是主要收益能覆盖坏账就行

A3：覆盖坏账这个确实是个好指标，便坏账的控制，其实也是比较难的，只有发生了，你才知道产生了坏账。只向特定的人群开放业务，可以从一定程度上减低风险。如果从0用户0数据做起，就敢做现金贷业务，被坑的风险比较大。我有一个朋友，也是在做银行的不良资产处理

A4：反欺诈、风控都是要付出血淋淋的代价的

A5：不赔一堆钱，确实培养不出好风控来

---
Q：证券公司下属公司（小证券公司）向自己证券客户开放理财和贷款业务，很滋润。

A1：现金贷业务的用户，有些消金公司是从有购买过消费分期和良好还款行为的用户中筛选出来的，也有是纯提供证件就可以贷现金

A2：嗯，只向你了解的客户放款，风险比较低。证券类的客户，都是有资产证明的，我们也打算把民生证券的客户拿过来，还有民生信托

A3：对就是要这样玩，各个业务相互渗透。比如 我们和银行就的这样玩的，相互引流，而且还都是优质客户。

*（XX证券某项目组）我们在的项目组不管账户，管用户涉及用户信息、TSSO、第三方对接、支付等。*

---

Q：互联网现金贷，真不好玩，弄不好就被坑了，不要和陌生人做生意（非巨头公司疯控不行？）

A：巨头也有自己的玩法，像微粒贷，本身就是基于白名单机制的，也不是没有底线的玩

---
Q：证券公司把自己的客户介绍给银行。这个违规的吧
A：[前两天看了江南愤青](https://www.zhihu.com/people/jiang-nan-fen-qing/answers)
的文章，说互联网风控就是扯蛋的。不过他有些话说的很有道理，赚得起赔不起


---
Q：昨天我们还在讨论这个事，反欺诈的模型永远是滞后的，怎么能做到预警，也就是在短时间内能识别并反映出来，这是反欺诈系统更重要任务。

A1：风险控制这种东西本身就很难搞，特别是P2P行业，太困难了 

A2：其它什么规则、决策，都互相抄的，疯控，主要还是白名单，黑名单值钱（黑名单没啥技术含量，你把市面上好点的征信公司接了，黑名单就有大半了）

Q：为啥反欺诈的模型是滞后的？

A1：反欺诈模型滞后是因为  很多欺诈行为没出来之前你怎么知道他是欺诈

A2：有句话说得好，道高一尺魔高一丈，风控就是道总会有魔比你高，所以就滞后啦

A3：风控就像软件，总有漏洞，主要看公司在补这个洞及不及时，有无资金把这个洞引起的坑填住

A4：比如之前拿农村的白户进行大量套现骗贷  都是真正的人  但是之前没有任何违规行为  你放不放贷

A5：是的，模型和病毒库一样，你得先发现特征，再建模，黄花菜都谅了

---
Q：黑白名单：平安这种公司，有寿险大保单数据，有房产数据，有证券、银行资产数据，可以搞出来独有的黑白名单。

A1：主要还是门槛吧

A2：平安也一样有的时候都是内鬼内外接应，因为业绩考核压力太大   销售员 也扛不住  主动帮助个人或者企业作弊

A3：黑名单难搞，可以做白名单阿

Q：京东这种公司，有大量用户行为数据，有潜力可以搞出有技术含量的黑白名单，其它公司要什么没什么，歇菜，只能买

A1：你要相信，平安，京东，有数据的公司，最终都会有子公司出来买黑名单的服务的

A2：我觉得这是一个指导思想。把期望寄托在别人身上，还是不靠谱

A3：内外接应的都是扛不住利益驱动的

A4：我不寄托在一个人身上。我接多个数据源。多个黑名单

A5：没条件的公司自己做个系统，先排除80%明显的羊毛党，剩下的再去买征信服务过滤。征信公司要是没过滤出来，搞个协议，风险转嫁到提供高价疯控服务的征信公司去

A6：我们现在讨论的还是有规律的那种，还有没有规律的比如火哥之前说的股票配资公司的那种直接千股跌停一直跌全部死什么风控都没用

A7：黑名单只能减低概率，不能解决业务问题，你最终还是要把钱放出去

---
Q：黑名单查出来误诊了，征信机构赔钱吗？

Q：黑名单何来误诊？

A1：黑名单是有误诊的

A2：当然接入黑名单渠道，都要大规模用历史数据去测的。根据情况，来定黑名单的影响因子。我的意思，一个人跑下来，如果没有中黑名单，但是最后坏账了，你不能说黑名单不好

A3：征信公司卖的疯控说全套服务吧，不仅是黑名单，疯控服务误诊了就得赔钱，要不然征信公司太好开了

A4：你们把征信公司看的太高大上了

A5：黑名单的误诊是故意的，之所以会出现这种情况是因为信用良好的个人或者公司就那么多，其他企业做的自己的企业就没得做   然后一些公司就故意把一些信用良好的个人或者公司搞进自己公司对外公布的黑名单内让别的公司不去做他们的生意，然后自己的公司偷偷做，这个就是所谓黑名单的误诊。

A6：征信只能是自己模型的一个变量，黑名单只是对你的决策有着较大的否决权，没有5年的自己数据积累，玩风控就是扯。

## 2.6 资讯讨论

重磅！人民银行今天正式宣布，央行发布“银行卡清算牌照”申请指南 "无数量限制"
http://mp.weixin.qq.com/s/cUmgUPgYwMhJZP4FGNNqMA

观点：其实是为网联铺路，最终银联和网联作为合法的清算机构

Q：工行 阿里之前据传要申请牌照，后来为什么会放弃？

A1：目的是让银联和网联合法，其它小伙伴一边去耍

A2：还有VISA master，加速国际化进程（VISA master估计短时间内老火）

A3：网联也要搞二维码呢


---

Q：咱们普通电商平台能直连网联吗？
==待回复==

