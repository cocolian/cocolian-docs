---
layout:     source 
title:      "2018-11-15-WeChat"
date:       2018-11-15 12:00:00
author:     wood-通联-技术
lines:      90 
tag:       [chat]
---
> 09:20:00  李秀刚-TRHUI-产品  
   
有谁在这里吗  
   
> 09:20:00  李秀刚-TRHUI-产品  
   
![2018-11-15 09:20:00](http://static.cocolian.cn/img/20181115_092000.png) 
   
> 09:20:26  右军  
   
▌ 数据是黄金还是垃圾？  互联网的出现，特别是移动互联网的飞速发展产生了大量的数据。这些海量数据是公司开展业务的宝贵财富。经常有人说：“数据是未来的石油”，“数据是未来的钞票”，“数据是未来的黄金”。如果数据真的那么有价值，那么无限增加数据就会带来无限的价值，公司光靠不断积累数据就能成为世界上最有价值的公司。事实上，今天庞大的数据存储量已经为各公司带来了沉重的技术和财务负担，那么数据到底是黄金还是垃圾呢？  
   
> 09:20:26  右军-蚂蚁金服-成都  
   
[数据是黄金还是垃圾？
](http://mp.weixin.qq.com/s?__biz=MzIxMzEzMjM5NQ==&amp;amp;amp;mid=2651030558&amp;amp;amp;idx=1&amp;amp;amp;sn=2df2d8b26be43191685cacf213fc74c3&amp;amp;amp;chksm=8c4c511abb3bd80c6716c850c21a4dc01cddd787f2768ff6837cd0560722c3c8d5796c6eb277&amp;amp;amp;mpshare=1&amp;amp;amp;scene=1&amp;amp;amp;srcid=1115g94vDJTmcEelMhkRYHDj#rd)  
   
> 09:55:34    
   
> 14:53:46  丹凤-现在支付-产品  
   
大神们，谁能帮我看看 我遇到的问题~  
   
> 14:53:52    
   
> 14:54:07    
   
> 14:54:58  丹凤-现在支付-产品  
   
![2018-11-15 14:54:58](http://static.cocolian.cn/img/20181115_145458.png) 
   
> 14:55:07  丹凤-现在支付-产品  
   
![2018-11-15 14:55:07](http://static.cocolian.cn/img/20181115_145507.png) 
   
> 14:55:44  丹凤-现在支付-产品  
   
有好多疑问呀，搞不懂，求大神们帮忙~[撇嘴]  
   
> 14:58:00    
   
> 14:58:39  wood-通联-技术  
   
啥问题？  
   
> 15:00:14  丹凤-现在支付-产品  
   
你看我上面 整理了我的问题背景  和 难点  
   
> 15:00:32  丹凤-现在支付-产品  
   
失败流程处理： （1）商户账户信息错误、异常等原因导致失败（实际拿到的划付结果是划付失败的） 处理方案：人工联系商户 更正账户信息，然后 重新生成划付单，再次划付；此时生成的划付信息 订单编号 和 划付编号 会变化么？变化的话 和老的划付失败的订单如何关联起来？  
   
> 15:01:51  wood-通联-技术  
   
第一笔划付信息失败了  
   
> 15:01:59  wood-通联-技术  
   
生成新的划付编号肯定是新的  
   
> 15:02:05  wood-通联-技术  
   
为啥要关联？  
   
> 15:02:37  wood-通联-技术  
   
就是一笔失败了，我再付一次就好了  
   
> 15:04:01  wood-通联-技术  
   
这一笔肯定会和上一笔有一个统一标识的  
   
> 15:04:08  wood-通联-技术  
   
具体的要看你们系统怎么定义  
   
> 15:04:34  丹凤-现在支付-产品  
   
因为这个 划付是商户 提现生成的嘛，不和之前 关联 会有问题么  
   
> 15:04:46  wood-通联-技术  
   
肯定要关联的  
   
> 15:04:54  wood-通联-技术  
   
举个例子  
   
> 15:05:01  wood-通联-技术  
   
一个订单的交易信息  
   
> 15:05:07  wood-通联-技术  
   
订单号就是关联  
   
> 15:05:16  wood-通联-技术  
   
第一笔支付失败了  
   
> 15:05:24  wood-通联-技术  
   
我可以用这个订单号再支付一遍  
   
> 15:05:59  wood-通联-技术  
   
一个是商品订单，一个是支付订单  
   
> 15:06:06  wood-通联-技术  
   
两个东西  
   
> 15:06:59  丹凤-现在支付-产品  
   
嗯，也就是划付编号可以变化  订单编号不能变化 是不？  
   
> 15:07:25  wood-通联-技术  
   
是  
   
> 15:07:30  wood-通联-技术  
   
类似的原理  
   
> 15:07:49  wood-通联-技术  
   
这样查一个订单的支付明细，可以查到多笔支付记录  
   
> 15:07:57  wood-通联-技术  
   
有成功的，有失败的  
   
> 15:08:03  丹凤-现在支付-产品  
   
（2）人工操作错误，管理人员 误把管理后台的划付状态更改成失败了（实际拿到的划付结果是划付失败的） 处理方案：直接人工 更改订单划付状态为 未知，再跑一边银行划付结果，系统自动更新划付状态为成功。  
   
> 15:08:24  丹凤-现在支付-产品  
   
那这种情况呢？我给的处理方案 可行不？  
   
> 15:08:56  wood-通联-技术  
   
人工更改都是要留记录的  
   
> 15:08:59  丹凤-现在支付-产品  
   
实际拿到银行 的划付结果 是成功的  
   
> 15:09:46  wood-通联-技术  
   
如果拿到划付信息是成功的  
   
> 15:10:01  丹凤-现在支付-产品  
   
就比如说 是管理操作人员 误把一个订单 搞失败了，实际银行划付成功了  
   
> 15:10:03  wood-通联-技术  
   
就直接走流程改划付状态就好了  
   
> 15:10:14  wood-通联-技术  
   
为啥还要跑划付结果？  
   
> 15:10:26  wood-通联-技术  
   
难道还要再划付一次？  
   
> 15:10:42  丹凤-现在支付-产品  
   
这个时候 是一步到位 改成功，还是再解析划付结果，需要 系统自动改成功？  
   
> 15:10:59  wood-通联-技术  
   
先确认是否成功啊  
   
> 15:11:08  丹凤-现在支付-产品  
   
确定 是成功的  
   
> 15:11:09  wood-通联-技术  
   
如果确实是成功，就人工介入啊  
   
> 15:11:32  wood-通联-技术  
   
直接改状态不就行了  
   
> 15:11:38  wood-通联-技术  
   
注意留痕  
   
> 15:11:47  wood-通联-技术  
   
就是加一条记录  
   
> 15:11:54  丹凤-现在支付-产品  
   
走SQL  直接更改 交易状态 为成功 ，我司好像是不允许  
   
> 15:12:06  wood-通联-技术  
   
是更正  
   
> 15:12:18  wood-通联-技术  
   
不是直接改SQL  
   
> 15:12:19  丹凤-现在支付-产品  
   
嗯  
   
> 15:12:39  wood-通联-技术  
   
这个就是差错流程了  
   
> 15:13:00  丹凤-现在支付-产品  
   
好的  
   
> 15:13:44  丹凤-现在支付-产品  
   
未知流程处理： （1）短时间内，真的是还没有拿到银行划付结果 处理方案：正常等待划付结果 （2）过了一定的时间段，比如15天，仍然没有划付结果 处理方案：超过设定时长之后，系统自动修改为失败状态，进入失败流程处理  
   
> 15:14:01  丹凤-现在支付-产品  
   
划付结果 未知的处理方法 对不？  
   
> 15:14:22  wood-通联-技术  
   
为啥需要等这么长时间?  
   
> 15:14:33  wood-通联-技术  
   
需要15天吗？  
   
> 15:15:03  丹凤-现在支付-产品  
   
银行说的 划付结果5天内  
   
> 15:15:18  丹凤-现在支付-产品  
   
那我们要把 时间间隔设置 那么短么？  
   
> 15:15:29  wood-通联-技术  
   
他说5天，10天还不行？  
   
> 15:16:00  丹凤-现在支付-产品  
   
嗯，如果 超时了 是不是 可以搞成失败的状态？  
   
> 15:16:55    
   
> 15:17:41  wood-通联-技术  
   
这种一开始可以置失败，然后人工介入，人工介入后，划付成功后再补录成功。  
   
> 15:18:19  wood-通联-技术  
   
就和改状态一个流程  
   
> 15:18:54  丹凤-现在支付-产品  
   
嗯  
   
> 15:19:08  丹凤-现在支付-产品  
   
异常流程处理： （1）实际打款金额 银行打多了 处理方案：人工追回多打的部分 或者 下次打款时自动扣除？ （现实中可能很难追回这部分） （2）实际打款金额 银行打少了 处理方案：人工补打 少打部分金额 或者 下次打款时增加打款金额  
   
> 15:22:45  wood-通联-技术  
   
第一个一般应该是通知商户  
   
> 15:22:56  wood-通联-技术  
   
和商户商议处理意见  
   
> 15:23:11  wood-通联-技术  
   
商户愿意马上退也可以，下次扣除也可以  
   
> 15:23:56  wood-通联-技术  
   
打少了，最好是马上补打，如果确实有困难，可以下次增加金额  
   
> 15:24:02  wood-通联-技术  
   
最好也是通知一下商户  
   
> 15:25:38  丹凤-现在支付-产品  
   
好的  
   
> 15:27:00  丹凤-现在支付-产品  
   
除了这些 在我这种银行打款  确认打款结果的流程了 还有什么 其他异常流程需要处理么？  
   
> 15:32:36  Elin-Hls-产品经理-广州  
   
弱弱的问一下，为什么需要人工操作？不走自动化？  
   
> 15:32:38  Elin-Hls-产品经理-广州  
   
![2018-11-15 15:32:38](http://static.cocolian.cn/img/20181115_153238.png) 
   
> 15:33:40  丹凤-现在支付-产品  
   
你说的自动化 是啥意思？解析银行划付单么？  
   
> 15:33:53  Elin-Hls-产品经理-广州  
   
对  
   
> 15:33:59  丹凤-现在支付-产品  
   
但是有的 国家 ，比如说 缅甸 ，他们真的很落后  
   
> 15:34:13  丹凤-现在支付-产品  
   
打款 还要打印好 纸质文件   
   
> 15:34:43  Elin-Hls-产品经理-广州  
   
o  
   
> 15:34:51  丹凤-现在支付-产品  
   
打款结果 也是去查的，一般打款失败了 银行才通知  
   
> 15:35:56  丹凤-现在支付-产品  
   
@wood-通联-技术  谢谢 热心解答~  
   
> 19:28:58  姜桥-摩拜单车-技术  
   
[基于SpringCloud的微服务架构演变史？
](http://mp.weixin.qq.com/s?__biz=MzU3NDY4NzQwNQ==&amp;amp;amp;mid=2247484134&amp;amp;amp;idx=1&amp;amp;amp;sn=7e988f2064f8b174e23a6e3bde4b0c1e&amp;amp;amp;chksm=fd2fd324ca585a324741b38fb01fd20b015e7201839d195dbfcf5b3ee9753b49e5381cd883cf&amp;amp;amp;mpshare=1&amp;amp;amp;scene=1&amp;amp;amp;srcid=1115eKPLo8nOefUaon8s0U5E#rd)  
   
> 19:41:58  j4念勾for-TAL-开发  
   
[强]  
   
> 19:45:37  j4念勾for-TAL-开发  
   
微服务，谈一下康威定律，可能比较好理解为什么这样玩  
   
> 19:59:12  姜桥-摩拜单车-技术  
   
[强]  
   
