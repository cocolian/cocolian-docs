---
layout:     source 
title:      "2018-07-02-WeChat"
date:       2018-07-02 12:00:00
author:     PaymentGroup
lines:      121 
tag:       [chat]
---
> 08:27:25  右军  
   
架构师是足够复杂、规模较大的系统才需要的角色，当系统架构不那么一目了然，才需要有人在更高的视角上去关注整体性的东西。 架构师是高阶职位，难以通过培训批量生产，严重依赖于个人的工作经验和成长，而且各方面都要求更高。  
   
> 08:27:26  右军  
   
[架构师的自我修养](http://mp.weixin.qq.com/s?__biz=MzIxMzEzMjM5NQ==&amp;amp;amp;mid=2651029959&amp;amp;amp;idx=1&amp;amp;amp;sn=23a7b333e2b16c26df8864008effd85c&amp;amp;amp;chksm=8c4c54c3bb3bddd5bc2e8db911854539c4aea69ea3f1bd5562e0b0062e180b3ec22c0a362e5b&amp;amp;amp;mpshare=1&amp;amp;amp;scene=1&amp;amp;amp;srcid=0702iQyijJqRovRLTBOL3BAm#rd)  
   
> 09:45:52  沪上十三少  
   
@钟鸿敏-CF-技术总监 上次你说你们监控系统前端框架用什么？  
   
> 09:52:20  钟鸿敏  
   
https://preview.pro.ant.design/#/dashboard/analysis    
   
> 09:54:17  沪上十三少  
   
好，谢谢  
   
> 10:15:46  泽西-趋恒-架构师  
   
这个是你们自己开发的吗  
   
> 10:17:09  钟鸿敏  
   
不是，这只是一个现成的框架，antD，现在有很多现成的前端框架了  
   
> 10:20:35  Fighting  
   
蚂蚁金服开源的啊 ant.design 这种前端现在开源的不是很多么  
   
> 10:23:57  沪上十三少  
   
这个还需要翻墙啊？  
   
> 10:24:07  沪上十三少  
   
不翻墙打不开  
   
> 10:25:05  钟鸿敏  
   
。。。不需要啊  
   
> 10:26:34  沪上十三少  
   
开了vpn前后对比[偷笑]  
   
> 10:26:41  沪上十三少  
   
![2018-07-02 10:26:41](http://static.cocolian.cn/img/201807/20180702_102641.png) 
   
> 10:28:07  DouW-贝络-Pa  
   
google analytic 也可以  
   
> 10:31:54  地平线-文思-产品  
   
google analytic 这是个啥  
   
> 10:32:37  沪上十三少  
   
嗯  
   
> 16:35:54  沪上十三少  
   
讨论个话题，大家的业务监控都是做的？  
   
> 16:36:53  杨宽-京东金融-鼓励师  
   
apm  
   
> 16:37:07  沪上十三少  
   
业务监控啊  
   
> 16:38:00  杨宽-京东金融-鼓励师  
   
哦，自己开发  
   
> 16:38:12  程超  
   
我们也是apm  
   
> 16:38:20  沪上十三少  
   
1.大概有几个原则，不侵入业务代码；2.新增监控点需要可以灵活配置；3.权限什么当然应该有  
   
> 16:38:21  杨宽-京东金融-鼓励师  
   
apm上面的日志，也可以提取定制化  
   
> 16:38:36  杨宽-京东金融-鼓励师  
   
我们apm就可以看业务数据且环比同比报警  
   
> 16:38:47  程超  
   
使用agent就可以做到无侵入  
   
> 16:39:13  程超  
   
![2018-07-02 16:39:13](http://static.cocolian.cn/img/201807/20180702_163913.png) 
   
> 16:39:25  程超  
   
想监控什么东东，直接放上一个插件就ok了  
   
> 16:39:52  泽西-趋恒-架构师  
   
dubbo-plugin  
   
> 16:39:55  泽西-趋恒-架构师  
   
做什么的  
   
> 16:40:41  程超  
   
监控dubbo的调用链信息  
   
> 16:40:42  沪上十三少  
   
好像都脱离不了技术层面的监控  
   
> 16:40:58  沪上十三少  
   
我需要的是业务监控  
   
> 16:41:24  程超  
   
@乐天-麦子金服资金平台 说说你的业务监控点是啥  
   
> 16:41:46  泽西-趋恒-架构师  
   
你们监控调用链是用什么做的？  
   
> 16:42:03  泽西-趋恒-架构师  
   
zipkin？  
   
> 16:44:45  程超  
   
zipkin只有trace功能  
   
> 16:44:49  程超  
   
没有其他的了  
   
> 16:52:27  Frede  
   
pinpoint 无侵入  
   
> 16:55:20  Jason finzsoft 首架  
   
业务监控就得埋点  
   
> 16:56:02  青年IT男  
   
skywalking agent方式无入侵  
   
> 16:56:08  青年IT男  
   
性能还不错  
   
> 16:56:09  Jason finzsoft 首架  
   
或者说大多数情况下需要埋点 跟非入侵矛盾  
   
> 16:56:46  程超  
   
又要埋点，又要非侵入，怎么可能  
   
> 16:57:09  程超  
   
通过agent只能采集方法级别的基本信息，无法在业务代码中进行植入  
   
> 16:57:26  杨宽-京东金融-鼓励师  
   
可以的，只要你方法写得好  
   
> 16:58:01  程超  
   
@杨宽-京东金融-鼓励师 这种是理想情况下是这样的，一般达不到  
   
> 16:58:29  青年IT男  
   
agent 也是入侵式 只是这个埋点不是我们自己控制而已  
   
> 16:58:38  杨宽-京东金融-鼓励师  
   
![2018-07-02 16:58:38](http://static.cocolian.cn/img/201807/20180702_165838.png) 
   
> 16:58:45  杨宽-京东金融-鼓励师  
   
这个截图就是apm  
   
> 16:59:13  杨宽-京东金融-鼓励师  
   
我觉得这产品如果可以提供脚本分析配置，效果更好  
   
> 17:00:13  程超  
   
@杨宽-京东金融-鼓励师 京东用的这个？  
   
> 17:02:37  泽西-趋恒-架构师  
   
这个怎么监视dubbo?  
   
> 17:02:51  杨宽-京东金融-鼓励师  
   
要定制dubbo的拦截器  
   
> 17:03:24  程超  
   
@李勇~易极付~PL 其实是否侵入，主要看是谁来侵入的角色定位了，现在这种概念变成了，只要不让开发来改代码，就可以认为是不侵入了  
   
> 17:04:22  泽西-趋恒-架构师  
   
你们知道现在那个用得多，资料全吗  
   
> 17:04:47  沪上十三少  
   
@程超-流浪的猴 就是业务层面的数据做整理、分析，有问题的报警  
   
> 17:05:03  沪上十三少  
   
不关心技术层面，比如调用连啊，这些不管  
   
> 17:05:37  泽西-趋恒-架构师  
   
apm有没有一整套完整的方案？  
   
> 17:06:21  程超  
   
@乐天-麦子金服资金平台 针对有问题的要报警，只要监控方法就可以，如果方法报错抛出异常或者有相关错误码，我们拦截到就可以。关于业务层面的数据因为我不太了解你们业务，还无法判断  
   
> 17:06:58  hgwym  
   
一般都是坐在框架里，通过自动埋点的方式采集数据进行监控，只要业务代码不改就不算侵入  
   
> 17:07:43  沪上十三少  
   
我想的是弄一个专门的监控库，这样不需要埋点，需要的业务数据都同步到监控库  
   
> 17:10:55  杨宽-京东金融-鼓励师  
   
累死你  
   
> 17:11:10  程超  
   
累死你  
   
> 17:11:51  沪上十三少  
   
讲讲  
   
> 17:12:04  杨宽-京东金融-鼓励师  
   
订单.状态.省份.性别.会员级别.价格，一个订单n维度。别业务数据也n个维度  
   
> 17:12:30  沪上十三少  
   
数据量跟你们电商肯定没法比  
   
> 17:12:35  杨宽-京东金融-鼓励师  
   
你的思路就是bi，需要了解数据业务规则，业务规则变了，你采集也变  
   
> 17:12:46  沪上十三少  
   
是的  
   
> 17:12:56  monk  
   
延时能接受吗？  
   
> 17:13:00  沪上十三少  
   
不啊  
   
> 17:13:10  沪上十三少  
   
我就搭一个平台  
   
> 17:13:20  沪上十三少  
   
具体业务逻辑，业务自己搞  
   
> 17:13:24  杨宽-京东金融-鼓励师  
   
我们做了一个业务分析，客户侵入埋点，自己配置维度，自己到后台配置展示。后台就一个开发，前端两个  
   
> 17:13:26  沪上十三少  
   
这个是目的想法  
   
> 17:13:37  程超  
   
那你就整一个AI智能分析平台  
   
> 17:14:06  程超  
   
先把数据弄过来，然后再想办法做分析吧  
   
> 17:14:43  沪上十三少  
   
@monk 我们这边看起来，延迟基本在1分钟左右，业务监控还是可以接受  
   
> 17:14:53  沪上十三少  
   
数据同步的延迟  
   
> 17:38:44  陈??3310 -展鸿-SM  
   
求助一下大家，这种服务器异常有无解决思路？  
   
> 17:38:45  陈??3310 -展鸿-SM  
   
![2018-07-02 17:38:45](http://static.cocolian.cn/img/201807/20180702_173845.png) 
   
> 17:39:19  陈??3310 -展鸿-SM  
   
我本地试过换wifi+重启解决过，但服务器上没试过，重启服务无聊，不能重启mysql  
   
> 17:39:59  kent--研发  
   
你这是服务器修改本地时间了吧  
   
> 17:42:46  syu  
   
很多时候是 业务服务器和数据库服务器的网络连接被防火墙强制断开到了  
   
> 17:42:53  syu  
   
@陈??3310 -展鸿-SM   
   
> 17:47:22  杜雷-乐天-技术  
   
这种被防火墙断开的情况我们也有过，特别是启动连接池的时候。  
   
> 17:48:25  北京一张泽雄  
   
不是有个test么，启用test心跳试试  
   
> 17:48:31  陈??3310 -展鸿-SM  
   
这问题遇到2次了，分享一下，现在已经搞定 分享一下方法，仅供参考 set global innodb_max_dirty_pages_pct=80（默认值50）  
   
> 17:48:52  杜雷-乐天-技术  
   
活来就是用test心跳搞定了  
   
> 17:49:08  杜雷-乐天-技术  
   
后来  
   
> 17:50:14  陈??3310 -展鸿-SM  
   
我也不知道什么原因导致，也许是脏数据……  
   
> 17:50:29  沪上十三少  
   
这个是mysql 8小时问题啊  
   
> 17:50:31  泽西-趋恒-架构师  
   
&amp;#160; 2、关于innodb_max_dirty_pages_pct值的争议，如果值过大，内存也很大或者服务器压力很大，那么效率很降低，如果设置的值过小，那么硬盘的压力会增加，建议是在75-80.并且innodb plugin引进了innodb_adaptive_flushng(自适应的刷新)，该值影响每秒刷新脏页的数量。  
   
> 17:50:46  陈??3310 -展鸿-SM  
   
对 我们以前的值是50  
   
> 17:51:00  陈??3310 -展鸿-SM  
   
尝试着改成80，就恢复连接了  
   
> 17:52:00  沪上十三少  
   
这个问题很奇怪，我们这也一直都有，连接池test也不起作用  
   
> 17:52:14  陈??3310 -展鸿-SM  
   
对的，我也试过，这次是用这种方式  
   
> 17:53:28  沪上十三少  
   
innodb_max_dirty_pages_pct是干嘛的  
   
> 17:54:39  陆训-51信用卡-开发  
   
innodb_max_dirty_pages_pct是干嘛的  
   
> 17:54:44  陆训-51信用卡-开发  
   
我来百度下  
   
> 17:55:04  陈??3310 -展鸿-SM  
   
我也只能通过百度来回答  哈啊啊哈和  
   
> 17:56:02  地平线-文思-产品  
   
请教下大家，做一个拖拉拽的java开发IDE工具，有什么软件或者开源框架吗？  
   
> 18:00:42  沪上十三少  
   
@陈??3310 -展鸿-SM 这个参数跟这个问题有什么关系，解释下  
   
> 18:07:15  陈??3310 -展鸿-SM  
   
![2018-07-02 18:07:15](http://static.cocolian.cn/img/201807/20180702_180715.png) 
   
> 18:07:39  陈??3310 -展鸿-SM  
   
我百度的[冷汗]  
   
> 18:09:12  Zero  
   
你是通过分析MYSQL哪项指标，得到修改这个参数可以解决问题的？  
   
> 19:14:59  陈??3310 -展鸿-SM  
   
@王宁-杉德-开发 你家今天的系统是不是故障了[偷笑]  
   
> 19:29:25  Zero  
   
  
   
> 19:34:53  陈??3310 -展鸿-SM  
   
不会是一个原因吧[偷笑]，大约何时很恢复？  
   
> 22:08:59  彭勇升  
   
![2018-07-02 22:08:59](http://static.cocolian.cn/img/201807/20180702_220859.png) 
   
> 22:09:38  彭勇升  
   
欢迎对分布式链路追踪感兴趣的同学前来参加。  
   
> 22:17:30  钟鸿敏  
   
如果只是分布式链路追踪比较简单，httpheader+拦截器就够了，无入侵，自己都可以写，复杂的业务监控很难不入侵，太依赖业务过程，一般就是打点日志了  
   
> 22:40:06  彭勇升  
   
我觉得是生态，如果大家一起共享，采集端可以支持更多的语言，同时完成多语言的打通，分析也可以接入更多的监控系统，人多力量大，推成事实标准，国外的人喜欢聚在一起，可以玩的很开心。生态支持着一个系统，就像操作系统国内不是不会做，是做不出生态。  
   
> 22:42:10  右军  
   
支持楼上的情怀  
   
> 22:43:43  吴晟  
   
不算情怀了，越熟悉他们，这个感触越深  
   
> 22:45:08  吴晟  
   
硅谷开源的抱团相当厉害的  
   
> 22:46:49  diyer  
   
问下，今天杉德是不是系统出问题了？  
   
> 22:47:31  右军  
   
和当下工作关系不大，不然我还想参与一些开源的事情  
   
> 22:49:21  彭勇升  
   
最近两年国外开源盛起，换套路了，感觉有想法用开源垄断技术栈  
   
> 22:53:29  右军  
   
这个趋势是有的  
   
> 22:53:41  右军  
   
spring生态折算多大市场  
   
> 22:55:17  彭勇升  
   
国内的人工成本目前还不高，再涨两年，估计大家就没有心思自己搞了。  
   
> 22:55:54  吴晟  
   
开源已经不是有没有时间问题，是战略问题了。  
   
> 22:56:07  吴晟  
   
蚂蚁今年都开始全面转型了  
   
> 22:57:02  杨宽-京东金融-鼓励师  
   
转型什么  
   
> 23:00:03  彭勇升  
   
拥抱开源，腾讯在LC3上面也拥抱起来。  
   
> 23:03:16  吴晟  
   
转型全面开源。  
   
> 23:03:35  diyer  
   
@冷兴孜-杉德支付-研发?  
   
> 23:03:57  diyer  
   
你们系统还没恢复吗？  
   
